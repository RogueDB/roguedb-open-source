syntax = "proto3";

import "google/api/annotations.proto";
import "getting_started/queries.proto";

package rogue.services;

service RogueDB
{
    // gRPC APIs
	rpc insert(stream Insert) returns(stream Response) {}
    rpc update(stream Update) returns(stream Response) {}
    rpc remove(stream Remove) returns(stream Response) {}
	rpc search(stream Search) returns(stream Response) {}
    rpc subscribe(Subscribe) returns(Response) {
        option (google.api.http) = {
            post: "/rest/subscribe",
            body: "*" }; }

    // REST APIs
    rpc rest_insert(Insert) returns(Response) {
        option (google.api.http) = {
            post: "/rest/insert",
            body: "*" }; }

    rpc rest_update(Update) returns(Response) {
        option (google.api.http) = {
            patch: "/rest/update",
            body: "*" }; }

    rpc rest_remove(Remove) returns(Response) {
        option (google.api.http) = {
            delete: "/rest/remove",
            body: "*" }; }

    rpc rest_search(Search) returns(stream Response) {
        option (google.api.http) = {
            get: "/rest/search",
            body: "*" }; }

    // NOTE: Only used for benchmarking.
    rpc complete(Insert) returns(Response) {}
}
